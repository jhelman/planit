<!DOCTYPE html>
<html>

<head>
    <title>PlanIt</title>
    
    
    <script type="text/javascript" src="jquery-1.7.2.js"></script>
    <script type="text/javascript" src="jquery-ui/js/jquery-ui-1.8.18.custom.min.js"></script>
    <!-- <script type="text/javascript" src="jquery-ui/development-bundle/ui/jquery.ui.droppable.js"></script> -->
    
    
    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.css"/>
    
    <script type="text/javascript" src="bootstrap/js/bootstrap.js"></script>
    <script type="text/javascript" src="bootstrap/assets/bootstrap-tooltip.js"></script>
    <script type="text/javascript" src="bootstrap/assets/bootstrap-popover.js"></script>
    <script type="text/javascript" src="bootstrap/assets/bootstrap-alert.js"></script>
    <script type="text/javascript" src="bootstrap/assets/bootstrap-tab.js"></script>
    
    
    
    <script type="text/javascript">
            
        var FADING_ALERT_TIME = 2000;
        var fading_alert_timeout;
            
        function draw() {
            
            // Need to populate on page load or on course add
            $('#course1').popover({'title': 'CS 106A', 'content': 'Introductory CS Class',
                'placement': 'right'});
            $('#course2').popover({'title': 'Econ 1A', 'content': 'Introductory Economics Class',
                'placement': 'right'});
            $('#course3').popover({'title': 'Chem 31A', 'content': 'Introductory Chemistry Class',
                'placement': 'right'});
            
            
            // Static
            $('.icon-move').tooltip({'title': 'Move Course', 'placement': 'top'});
            $('.icon-trash').tooltip({'title': 'Delete Course', 'placement': 'top'});
            $('.icon-ok').tooltip({'title': 'Add Course', 'placement': 'top'});
            
        }
        
                
        $(document).ready(function () {
            
            draw();
            
            $('a[data-toggle="tab"]').on('shown', function (e) {
                var target = String(e.target).substring(String(e.target).length - 1);
                                
            });
            
            
            
            $('#add-course-alert').hide();
            
            $('#remove-course-alert').hide();
            
            // Reference: http://blog.petersendidit.com/post/drag-table-row-to-a-div-with-jquery/
            $('.course').draggable({handle: '.icon-move', revert: 'invalid',
                                    
                helper: function (event) {
                    // var courseName = event.currentTarget.firstElementChild.firstElementChild.children[0].innerHTML;
                    //                     var numUnits = event.currentTarget.firstElementChild.firstElementChild.children[1].innerHTML;
                    //                     return $('<table class="table table-bordered" style="width: 400px;"><tr><td class="course">' + 
                    //                         courseName + '</td><td style="units">' + numUnits + 
                    //                         '</td><td class="info"><center><i class="icon-move"></i>&nbsp;&nbsp;<i class="icon-trash"></i></center></td></tr></table>').appendTo('body');
                
                    var copy = $(event.currentTarget).clone();
                    copy.find('.icon-trash').unbind('onclick');
                    return copy.appendTo('body');
                
                },
                     
            });
            
            
            // Complicated application logic to accept which course (Dan)
            $('#qdiv2').droppable({accept: '#course1',
            
                // Figure out which list to append to (should we make the remove nicer??)
                drop: function (event, ui) {
                                        
                    ui.draggable.appendTo('#classes2');
                    
                }
            
            });
            
            // App logic to figure out which quarters to gray out (Dan)
            $('#qdiv3').droppable({
                
                over: function (event, ui) {
                    $(this).css('backgroundColor', 'red');
                },
                
                out: function (event, ui) {
                    $(this).css('backgroundColor', 'white');   
                },
                
                deactivate: function (event, ui) {
                    $(this).css('backgroundColor', 'white');   
                }
                
            });
            
        });
        
        // Functions to make the remove course message (need to actually remove!!)
        function removeCourse(courseName) {
            $('#remove-course-alert').alert();      
            $('#remove-course-alert-head').html('Delete ' + courseName + '?');
            $('#remove-course-alert-div').html('Are you sure you want to delete ' + courseName + 
                ' from this quarter?');
            $('#remove-course-alert').slideDown();
        }
        
        function cancelRemoveCourse() {
            $('#remove-course-alert').slideUp();
        }
        
        
        // Functions to add a course
        function addCourse(courseName, courseId) {
            $('#add-course-alert').alert();
            $('#add-course-alert-head').html('Added ' + courseName);
            $('#add-course-alert').fadeIn(function () {
                fading_alert_timeout = setTimeout("closeAddCourse()", FADING_ALERT_TIME);
            });
                        
            $('.icon-ok').tooltip('hide');
            
            $('#' + courseId).find('tr').removeClass('possible-course');
                        
            $($('#' + courseId).find('tr').children()[2]).html('<center><i class="icon-move"></i>&nbsp;&nbsp;<i class="icon-trash" onclick="removeCourse(\'Chem 31A\');"></i></center>');
        
            $('#' + courseId).draggable({handle: '.icon-move', revert: 'invalid',
                                    
                helper: function (event) {
                    // var courseName = event.currentTarget.firstElementChild.firstElementChild.children[0].innerHTML;
                    //                     var numUnits = event.currentTarget.firstElementChild.firstElementChild.children[1].innerHTML;
                    //                     return $('<table class="table table-bordered" style="width: 400px;"><tr><td class="course">' + 
                    //                         courseName + '</td><td style="units">' + numUnits + 
                    //                         '</td><td class="info"><center><i class="icon-move"></i>&nbsp;&nbsp;<i class="icon-trash"></i></center></td></tr></table>').appendTo('body');
                
                    var copy = $(event.currentTarget).clone();
                    copy.find('i').unbind('onclick');
                    return copy.appendTo('body');
                
                },
                     
            });
            
        
            draw();
        
        }
        
        function closeAddCourse() {
            clearTimeout(fading_alert_timeout);
            $('#add-course-alert').fadeOut();
        }

        
    
    </script>
    
    <style type="text/css">
    
        td.courseName {
            width: 200px;
        }
        
        td.units {
            width: 140px;
        }
        
        td.info {
            width: 60px;
        }
        
        tr.possible-course {
            background-color: #FFF4B8;
        }
        
        .icon-trash, .icon-ok {
            cursor: pointer;
        }
        
        .icon-move {
            cursor: move;
        }
    
        #remove-course-alert {
            width: 400px;
        }
        
        #add-course-alert {
            width: 400px;
        }
    
        .quarter-div {
            -moz-border-radius: 10px;
            border-radius: 10px;
            width: 420px;
            height: 400px;
            border: 1px solid;
        }
        
        #bottom-left-box {
            width: 420px;
            height: 180px;
            position: relative; 
            left: 100px; 
            top: -170px;
            border-top: 1px solid #DDDDDD;
            -moz-border-top-right-radius: 10px;
            border-top-right-radius: 10px;
            border-right: 1px solid #DDDDDD;
            -moz-border-bottom-right-radius: 10px;
            border-bottom-right-radius: 10px;
            border-bottom: 1px solid #DDDDDD;
            -moz-border-bottom-left-radius: 10px;
            border-bottom-left-radius: 10px;
            -moz-border-top-left-radius: 10px;
            border-top-left-radius: 10px;

        }
        
        #bottom-left-helper-box-top {
            width: 10px;
            height: 38px;
            position: relative; 
            left: 99px; 
            top: 0px;
            border-left: 1px solid #DDDDDD;
           -moz-border-top-left-radius: 10px;
            border-top-left-radius: 10px;            
        }
        
        
        #bottom-left-helper-box-bottom {
            width: 10px;
            height: 30px;
            position: relative; 
            left: 99px; 
            top: -200px;
            border-left: 1px solid #DDDDDD;
           -moz-border-bottom-left-radius: 10px;
            border-bottom-left-radius: 10px;            
        }
        
        .tabbed-box {
/*            position: relative;
*/            margin: 10px;
        }
        
        .tab-pane {
            margin: 10px;
        }
        
        
        
    
    </style>
    
    
    
</head>



<body style="margin: 50px">
    
    <div class="row">
    
        <div class="span6">
            
            <div class="quarter-div" id="qdiv1"><center><br />
            
                <table id="course1" class="table table-bordered course" style="width: 400px;">
                    <tr>
                        <td class="courseName">CS 106A</td>
                        <td style="units">5 Units</td>
                        <td class="info"><center><i class="icon-move"></i>&nbsp;
                            <i class="icon-trash" onclick="removeCourse('CS 106A');"></i></center></td>
                    </tr>
                </table>
                <table id="course2" class="table table-bordered course" style="width: 400px">
                    <tr>
                        <td class="courseName">Econ 1A</td>
                        <td style="units">5 Units</td>
                        <td class="info"><center><i class="icon-move"></i>&nbsp;
                            <i class="icon-trash" onclick="removeCourse('Econ 1A');"></i></center></td>
                    </tr>
                </table>
                <table id="course3" class="table table-bordered" style="width: 400px">
                    <tr class="possible-course">
                        <td class="courseName">Chem 31A</td>
                        <td style="units">5 Units</td>
                        <td class="info">
                            <center><i class="icon-ok" onclick="addCourse('Chem 31A', 'course3');"></i></center></td>
                    </tr>
                </table>
            
            </center></div>
            
            <div class="alert alert-error fade in hide" id="remove-course-alert">
                <a class="close" onclick="cancelRemoveCourse();">&times;</a>
                <h4 class="alert-heading" id="remove-course-alert-head"></h4>
                <div id="remove-course-alert-div"></div>
                <div style="padding-top: 5px">
                    <input type="button" class="btn btn-danger" value="Delete Course"/>
                    <input type="button" class="btn" value="Cancel" onclick="cancelRemoveCourse();"/>
                </div>
            </div>
    
            <div class="alert alert-success fade in hide" id="add-course-alert">
                <a class="close" onclick="closeAddCourse();">&times;</a>
                <h4 class="alert-heading" id="add-course-alert-head"></h4>
                <div id="add-course-alert-div"></div>
            </div>
    
        </div>
        
        <div class="span6">
            
            <div class="quarter-div" id="qdiv2"><center><br />
                     
                <div id="classes2">
                    <table id="course4" class="table table-bordered course" style="width: 400px;">
                        <tr>
                            <td class="courseName">PWR 1</td>
                            <td style="units">4 Units</td>
                            <td class="info"><center><i class="icon-move"></i>&nbsp;
                                <i class="icon-trash" onclick="removeCourse('PWR 1');"></i></center></td>
                        </tr>
                    </table>
                    <table class="table table-bordered course" style="width: 400px">
                        <tr id="tr5">
                            <td class="courseName">Econ 1B</td>
                            <td style="units">5 Units</td>
                            <td class="info"><center><i class="icon-move"></i>&nbsp;
                                <i class="icon-trash" onclick="removeCourse('Econ 1B');"></i></center></td>
                        </tr>
                    </table>
                </div>
            </center></div>
                        
        </div>
        
        
        <div class="span6">
            
            <div class="quarter-div" id="qdiv3"><center><br />
            
                <table class="table table-bordered course" style="width: 400px;">
                    <tr id="tr6">
                        <td class="courseName">CS 106B</td>
                        <td style="units">5 Units</td>
                        <td class="info"><center><i class="icon-move"></i>&nbsp;
                            <i class="icon-trash" onclick="removeCourse('CS 106B');"></i></center></td>
                    </tr>
                </table>
                <table class="table table-bordered course" style="width: 400px">
                    <tr id="tr7">
                        <td class="courseName">CS 103</td>
                        <td style="units">5 Units</td>
                        <td class="info"><center><i class="icon-move"></i>&nbsp;
                            <i class="icon-trash" onclick="removeCourse('CS 103');"></i></center></td>
                    </tr>
                </table>
                <table class="table table-bordered course" style="width: 400px">
                    <tr id="tr7">
                        <td class="courseName">Physics 41</td>
                        <td style="units">4 Units</td>
                        <td class="info"><center><i class="icon-move"></i>&nbsp;
                            <i class="icon-trash" onclick="removeCourse('Physics 41');"></i></center></td>
                    </tr>
                </table>
            
            </center></div>
                        
        </div>
        
        
    </div>
    
    <br />
    <br />
    <br />
    <br />
    
    <div class="row">
        <div class="span4">
            
            <div id="bottom-left-helper-box-top">
                &nbsp;
            </div>
            <div class="tabbable tabs-left">
                <ul class="nav nav-tabs">
                    <li class="active"><a href="#1" data-toggle="tab">Search</a></li>
                    <li><a href="#2" data-toggle="tab">Major</a></li>
                    <li><a href="#3" data-toggle="tab">University</a></li>
                </ul>
                <div class="tab-content" id="bottom-left-box">
                    <div class="tab-pane active" id="1" align="center">
                            <br/>
                            <form class="form-search">
                                <input type="text" class="input-long search-query" placeholder="Search for course"/>
                                <button class="btn">Search</button>
                            </form>
                    </div>
                    
                    <div class="tab-pane" id="2">
                            
                        <div class="pagination" align="center">
                            <ul>
                                <li><a href="#">Prev</a></li>
                                <li class="active"><a href="#">1</a></li>
                                <li><a href="#">2</a></li>
                                <li><a href="#">3</a></li>
                                <li><a href="#">4</a></li>
                                <li><a href="#">Next</a></li>
                             </ul>  
                        </div>
                        
                    </div>
                    <div class="tab-pane" id="3">
                        <div class="pagination" align="center">
                            <ul>
                                <li><a href="#">Prev</a></li>
                                <li class="active"><a href="#">1</a></li>
                                <li><a href="#">2</a></li>
                                <li><a href="#">3</a></li>
                                <li><a href="#">4</a></li>
                                <li><a href="#">Next</a></li>
                             </ul>  
                        </div>  
                    </div>
                </div>
            </div>
            <div id="bottom-left-helper-box-bottom">
                &nbsp;
            </div>
            
            
            
        </div>
    </div>
    
</body>


</html>